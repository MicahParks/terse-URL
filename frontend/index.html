<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Terse URL</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
          integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
          crossorigin="anonymous"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
            crossorigin="anonymous"></script>
</head>
<body>

<div class="mx-auto w-25 p-3 rounded-3" style="background-color: #eee;">
    <form id="formElem">
        <div class="mb-3">
            <div class="mb-3">
                <label for="originalURL" class="form-label">Original URL</label>
                <input id="originalURL" type="url" class="form-control" aria-describedby="originalHelp">
                <div id="originalHelp" class="form-text">
                    The full path to the original URL the shortened URL will redirect to.
                </div>
            </div>
            <label for="shortenedURL">Shortened URL</label>
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span id="httpPrefix" class="input-group-text">MISSING</span>
                </div>
                <input id="shortenedURL" type="text" class="form-control" aria-describedby="httpPrefix">
            </div>
            <div class="mb-3">
                <select id="writeOperation" class="form-select" aria-label="Default select example">
                    <option selected value="insert">Insert</option>
                    <option value="update">Update</option>
                    <option value="upsert">Upsert</option>
                </select>
            </div>
            <div class="collapse mb-3" id="advanced">
                <hr/>
                <label for="redirectType">Redirect Type</label>
                <div class="mb-3 row justify-content-center">
                    <div id="redirectType" class="btn-group" role="group" aria-label="Basic radio toggle button group">

                        <input onclick="hideShowHTMLForm()" type="radio" class="btn-check" name="btnradio"
                               id="301Redirect" autocomplete="off" checked>
                        <label class="btn btn-outline-primary" for="301Redirect">HTTP 301</label>

                        <input onclick="hideShowHTMLForm()" type="radio" class="btn-check" name="btnradio"
                               id="302Redirect" autocomplete="off">
                        <label class="btn btn-outline-primary" for="302Redirect">HTTP 302</label>

                        <input onclick="hideShowHTMLForm()" type="radio" class="btn-check" name="btnradio"
                               id="metaRedirect" autocomplete="off">
                        <label class="btn btn-outline-primary" for="metaRedirect">HTML &lt;meta&gt;</label>

                        <input onclick="hideShowHTMLForm()" type="radio" class="btn-check" name="btnradio"
                               id="jsRedirect" autocomplete="off">
                        <label class="btn btn-outline-primary" for="jsRedirect">JavaScript</label>
                    </div>
                </div>
                <div class="collapse mb-3" id="htmlForm">
                    <div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1">HTML Title</span>
                        <input id="htmlTitle" type="text" class="form-control" aria-label="Username"
                               aria-describedby="basic-addon1">
                    </div>
                    <div class="form-check form-switch mb-3">
                        <input id="jsTracking" class="form-check-input" type="checkbox">
                        <label class="form-check-label" for="jsTracking">JavaScript Tracking</label>
                    </div>
                    <div class="row justify-content-between align-items-end mb-1">
                        <div class="col-md-auto">
                            <label for="ogMeta">Open Graph &lt;meta&gt;</label>
                        </div>
                        <div class="col-md-auto">
                            <button type="button" class="btn btn-primary" onclick="addOGInput();">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <div id="ogMeta" class="row mb-3">
                        <div id="ogInput" class="input-group mb-1">
                            <input type="text" class="form-control" placeholder="property"
                                   aria-label="property">
                            <input type="text" class="form-control" placeholder="content"
                                   aria-label="content">
                            <button type="button" class="btn btn-danger"
                                    onclick="this.parentNode.remove();">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    <div class="row justify-content-between align-items-end mb-1">
                        <div class="col-md-auto">
                            <label for="ogMeta">Twitter &lt;meta&gt;</label>
                        </div>
                        <div class="col-md-auto">
                            <button type="button" class="btn btn-primary" onclick="addTwitterInput();">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    <!--TODO Add OG and Twitter meta tags docs links.-->
                    <div id="twitterMeta" class="row mb-3">
                        <div id="twitterInput" class="input-group mb-1">
                            <input type="text" class="form-control" placeholder="name"
                                   aria-label="name">
                            <input type="text" class="form-control" placeholder="content"
                                   aria-label="content">
                            <button type="button" class="btn btn-danger"
                                    onclick="this.parentNode.remove();">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mb-3 justify-content-between">
            <div class="col-md-auto">
                <input id="advancedToggle" aria-expanded="false" type="checkbox" class="btn-check"
                       data-bs-toggle="collapse" autocomplete="off" onclick="$('#advanced').collapse('toggle');">
                <label class="btn btn-secondary" for="advancedToggle">Advanced</label>
            </div>
            <div class="col-md-auto">
                <button id="submitButton" type="submit" class="btn btn-primary">Shorten</button>
            </div>
        </div>
    </form>
</div>
<script src="data.js"></script>
<script src="delete.js"></script>
<script src="export.js"></script>
<script src="form.js"></script>
<script src="prefix.js"></script>
<script src="table.js"></script>
<script src="write.js"></script>
<script>

    // Get the prefix for all shortened URLs.
    getPrefix();

    // Set the handler for form submission.
    let formElem = document.getElementById("formElem");
    formElem.onsubmit = submitForm;
</script>
<script>
    function hideShowHTMLForm() {
        let meta = document.getElementById("metaRedirect");
        let js = document.getElementById("jsRedirect");
        let htmlForm = $("#htmlForm");
        if (meta.checked || js.checked) {
            htmlForm.collapse("show");
        } else {
            htmlForm.collapse("hide");
        }
    }
</script>
<script>
    let ogInputCounter = 0;
    let ogInput = document.getElementById("ogInput").cloneNode(true);
    for (let child of ogInput.childNodes) {
        child.value = "";
    }

    function addOGInput() {
        let clone2 = ogInput.cloneNode(true);
        clone2.id = ogInput.id + ogInputCounter;
        ogInputCounter++;
        document.getElementById("ogMeta").appendChild(clone2);
    }
</script>
<script>
    let twitterInputCounter = 0;
    let twitterInput = document.getElementById("twitterInput").cloneNode(true);
    for (let child of twitterInput.childNodes) {
        child.value = "";
    }

    function addTwitterInput() {
        let clone = twitterInput.cloneNode(true);
        clone.id = twitterInput.id + twitterInputCounter;
        twitterInputCounter++;
        document.getElementById("twitterMeta").appendChild(clone);
    }
</script>
</body>
</html>